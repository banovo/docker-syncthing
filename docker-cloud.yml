stdiscosrv:
  command: 'stdiscosrv -cert /opt/stdiscosrv/etc/cert.pem -key /opt/stdiscosrv/etc/key.pem -limit-avg 10 -limit-cache 25000 -stats-file /opt/stdiscosrv/var/stats -db-dsn file:///opt/stdiscosrv/var/stdiscosrv.db'
  environment:
    - CONTAINER_NAME=stdiscosrv
    - CONTAINER_USER=run
    - LOCAL_GID=1000
    - LOCAL_UID=1000
  image: 'banovo/docker-syncthing:stdiscosrv'
  ports:
    - '8443:8443'
  restart: always
  roles:
    - global
  volumes:
    - '/var/docker/stdiscosrv/etc:/opt/stdiscosrv/etc'
    - '/var/docker/stdiscosrv/var:/opt/stdiscosrv/var'

strelaysrv:
  command: 'strelaysrv -keys /opt/strelaysrv/etc -debug -ext-address=":443" -listen=":22067" -status-srv=":22070" -pools="" -provided-by="Banovo GmbH"'
  environment:
    - CONTAINER_NAME=strelaysrv
    - CONTAINER_USER=run
    - LOCAL_GID=1000
    - LOCAL_UID=1000
  image: 'banovo/docker-syncthing:strelaysrv'
  ports:
    - '443:22067'
    - '22070:22070'
  restart: always
  roles:
    - global
  volumes:
    - '/var/docker/strelaysrv/etc:/opt/strelaysrv/etc'

syncthing:
    command: 'syncthing -verbose -home=/opt/syncthing/etc'
    environment:
        - CONTAINER_NAME=syncthing
        - CONTAINER_USER=run
        - LOCAL_UID=1000
        - LOCAL_GID=1000
    image: 'banovo/docker-syncthing:syncthing'
    ports:
        - '8384:8384'
        - '22000:22000'
        - '21027:21027/udp'
    restart: always
    roles:
        - global
    volumes:
        - '/var/docker/syncthing/etc:/opt/syncthing/etc'
        - '/var/docker/syncthing/var:/opt/syncthing/var'
